# macup configuration file
# This is your personal Mac setup configuration

[settings]
fail_fast = false # Continue on errors (recommended)
max_parallel = 5  # Max concurrent package installs

# macup automatically detects required managers from the sections below.
# If you declare packages, macup will auto-install the necessary managers.

# ============================================
# Homebrew Packages
# ============================================

[brew]
depends_on = []

# Taps (third-party repositories)
taps = []

# CLI tools (formulae)
# Format: "package" or "package:binary" for custom binary name checking
# Examples:
#   - "neovim" -> installs neovim, checks for 'neovim' binary
#   - "httpie:http" -> installs httpie, checks for 'http' binary
formulae = [
  "neovim:nvim",
  "ripgrep:rg",
  "fd",
  "zoxide",
  "starship",
  "fzf",
  "chezmoi",
  "aws-vault",
  "awscli:aws",
  "btop",
]

casks = ["ghostty", "maccy", "font-hack-nerd-font"]

# GUI applications (casks)
# ============================================
# Mac App Store Apps
# ============================================

[mas]
depends_on = ["brew"] # mas-cli will be auto-installed via brew if needed

apps = [
  # { name = "Xcode", id = 497799835 },
  # { name = "1Password", id = 1333542190 },
]

# ============================================
# NPM Global Packages
# ============================================

[npm]
depends_on = ["brew"] # Node.js will be auto-installed via brew if needed

# Format: "package" or "package:binary" for custom binary name checking
# Examples:
#   - "typescript:tsc" -> installs typescript, checks for 'tsc' binary
#   - "prettier" -> installs prettier, checks for 'prettier' binary
global = [
  # "pnpm",
  # "typescript:tsc",
  # "@biomejs/biome:biome",
]

# ============================================
# Cargo Packages
# ============================================

[cargo]
depends_on = [
  "brew",
] # Rust will be auto-installed via brew if needed (or use rustup if available)

# Format: "package" or "package:binary" for custom binary name checking
# Examples:
#   - "ripgrep:rg" -> installs ripgrep, checks for 'rg' binary
#   - "bat" -> installs bat, checks for 'bat' binary
packages = [
  # "ripgrep:rg",
  # "bat",
  # "eza",
]

# ============================================
# Custom Install Scripts
# ============================================

[install]
depends_on = []

[[install.scripts]]
name = "oh-my-zsh"
binary = "omz"                                                                                                              # Check if 'omz' binary exists
check = "test -d ~/.oh-my-zsh"                                                                                              # Fallback: check if directory exists
command = 'sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended'

# [[install.scripts]]
# name = "nerd-font-jetbrains-mono"
# check = "test -f ~/Library/Fonts/JetBrainsMonoNerdFont-Regular.ttf"
# command = """
# curl -fLo ~/Library/Fonts/JetBrainsMonoNerdFont-Regular.ttf --create-dirs \
#   https://github.com/ryanoasis/nerd-fonts/raw/master/patched-fonts/JetBrainsMono/Ligatures/Regular/JetBrainsMonoNerdFont-Regular.ttf
# """
# required = false

# ============================================
# macOS System Settings
# ============================================

[system]
depends_on = []

commands = [
  # Dock settings
  "defaults write com.apple.dock autohide -bool true",
  "defaults write com.apple.dock tilesize -int 48",
  "defaults write com.apple.dock show-recents -bool false",
  "killall Dock",

  # Finder settings
  "defaults write NSGlobalDomain AppleShowAllExtensions -bool true",
  "defaults write com.apple.finder ShowPathbar -bool true",
  "defaults write com.apple.finder ShowStatusBar -bool true",
  "killall Finder",

  # Screenshots location
  # "defaults write com.apple.screencapture location ~/Pictures/Screenshots",
  # "mkdir -p ~/Pictures/Screenshots",

  # Disable crash reporter
  # "defaults write com.apple.CrashReporter DialogType -string 'none'",
]
