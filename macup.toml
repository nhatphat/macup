# macup configuration file
# This is your personal Mac setup configuration

[settings]
fail_fast = false # Continue on errors (recommended)
max_parallel = 5  # Max concurrent package installs

# macup automatically detects required managers from the sections below.
# If you declare packages, macup will auto-install the necessary managers.

# ============================================
# Homebrew Packages
# ============================================

[brew]
depends_on = []

# Taps (third-party repositories)
taps = []

# CLI tools (formulae)
# Format: "package" or "package:binary" for custom binary name checking
# Examples:
#   - "neovim" -> installs neovim, checks for 'neovim' binary
#   - "httpie:http" -> installs httpie, checks for 'http' binary
formulae = [
  # "neovim:nvim",
  "ripgrep:rg",
  "fd",
  "zoxide",
  "starship",
  "fzf",
  "chezmoi",
  "aws-vault",
  "awscli:aws",
  "btop",
  "aria2:aria2c",
  "gh",
  "git-crypt",
  "gnupg:gpg",
  "jq",
  "just",
  "lazygit",
  "lua",
  "markdownlint-cli2",
  "mise",
  "mkcert",
  "node",
  "rust:cargo",
  "terraform",
  "mas",
  "uv",
]

casks = [
  "ghostty",
  "maccy",
  "font-hack-nerd-font",
  "zed",
  # "orbstack",
  "brave-browser",
  "yaak",
  "arc",
  "shortcat",
]

# GUI applications (casks)
# ============================================
# Mac App Store Apps
# ============================================

[mas]
depends_on = ["brew"] # mas-cli will be auto-installed via brew if needed

apps = [
  { name = "Mattermost Desktop", id = 1614666244 },
  { name = "Translator by Mate", id = 1005088137 },
  { name = "TestFlight", id = 899247664 },
  # { name = "Slack for Desktop", id = 803453959 },
]

# ============================================
# NPM Global Packages
# ============================================

[npm]
depends_on = ["brew"] # Node.js will be auto-installed via brew if needed

# Format: "package" or "package:binary" for custom binary name checking
# Examples:
#   - "typescript:tsc" -> installs typescript, checks for 'tsc' binary
#   - "prettier" -> installs prettier, checks for 'prettier' binary
global = ["@github/copilot:copilot", "@yaakapp/cli:yaakcli"]

# ============================================
# Cargo Packages
# ============================================

[cargo]
depends_on = [
  "brew",
] # Rust will be auto-installed via brew if needed (or use rustup if available)

packages = []

# ============================================
# Custom Install Scripts
# ============================================

[install]
depends_on = []

[[install.scripts]]
name = "oh-my-zsh"
check = "test -d ~/.oh-my-zsh"
command = 'sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"'

[[install.scripts]]
name = "zsh-autosuggestions"
check = "test -d ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions"
command = 'git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions'

[[install.scripts]]
name = "zsh-syntax-highlighting"
check = "test -d ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting"
command = 'git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting'

[[install.scripts]]
name = "neovim"
binary = "nvim"
command = 'HOMEBREW_NO_AUTO_UPDATE=1 brew install neovim --head'

[[install.scripts]]
name = "opencode"
binary = "opencode"
command = 'curl -fsSL https://opencode.ai/install | bash'

[[install.scripts]]
name = "claude code"
binary = "claude"
command = "curl -fsSL https://claude.ai/install.sh | bash"

# ============================================
# macOS System Settings
# ============================================

[system]
depends_on = []

commands = [
  # ============================================
  # Dock settings
  # ============================================
  "defaults write com.apple.dock mru-spaces -bool false",                    # Don't auto-rearrange spaces
  "defaults write com.apple.dock autohide -bool true",                       # Auto-hide dock
  "defaults write com.apple.dock autohide-delay -float 0.0",                 # Remove delay when showing dock
  "defaults write com.apple.dock autohide-time-modifier -float 0.2",         # Speed up dock animation
  "defaults write com.apple.dock expose-animation-duration -float 0.1",      # Speed up Mission Control
  "defaults write com.apple.dock launchanim -bool false",                    # Disable launch animations
  "defaults write com.apple.dock minimize-to-application -bool true",        # Minimize to app icon
  "defaults write com.apple.dock orientation -string 'left'",                # Dock on left side
  "defaults write com.apple.dock show-process-indicators -bool true",        # Show running app indicators
  "defaults write com.apple.dock show-recents -bool false",                  # Don't show recent apps
  "defaults write com.apple.dock static-only -bool false",                   # Show all apps
  "defaults write com.apple.dock persistent-apps -array",                    # Clear all pinned apps
  "defaults write com.apple.dock tilesize -int 16",                          # Icon size 16px
  "defaults write com.apple.dock magnification -bool true",                  # Enable magnification
  "defaults write com.apple.dock largesize -int 32",                         # Magnified size 32px
  # Disable hot corners
  "defaults write com.apple.dock wvous-tl-corner -int 1",                    # Top-left: disabled
  "defaults write com.apple.dock wvous-tr-corner -int 1",                    # Top-right: disabled
  "defaults write com.apple.dock wvous-bl-corner -int 1",                    # Bottom-left: disabled
  "defaults write com.apple.dock wvous-br-corner -int 1",                    # Bottom-right: disabled

  # ============================================
  # Finder settings
  # ============================================
  "defaults write com.apple.finder AppleShowAllExtensions -bool true",       # Show all file extensions
  "defaults write com.apple.finder AppleShowAllFiles -bool true",            # Show hidden files
  "defaults write com.apple.finder ShowPathbar -bool true",                  # Show path bar
  "defaults write com.apple.finder ShowStatusBar -bool true",                # Show status bar

  # ============================================
  # Trackpad settings
  # ============================================
  "defaults write com.apple.AppleMultitouchTrackpad Clicking -bool true",    # Enable tap to click
  "defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true",
  "defaults write com.apple.AppleMultitouchTrackpad TrackpadRightClick -bool true",  # Enable right click
  "defaults write com.apple.AppleMultitouchTrackpad TrackpadThreeFingerDrag -bool true",  # Three finger drag

  # ============================================
  # Menu bar clock settings
  # ============================================
  "defaults write com.apple.menuextra.clock ShowAMPM -bool false",           # Use 24-hour format
  "defaults write com.apple.menuextra.clock ShowDate -int 1",                # Always show date
  "defaults write com.apple.menuextra.clock ShowDayOfWeek -bool true",       # Show day of week
  "defaults write com.apple.menuextra.clock ShowSeconds -bool false",        # Don't show seconds

  # ============================================
  # Login window settings
  # ============================================
  "defaults write com.apple.loginwindow GuestEnabled -bool false",           # Disable guest user
  "defaults write com.apple.loginwindow SHOWFULLNAME -bool false",           # Show username

  # ============================================
  # Screen saver settings
  # ============================================
  "defaults write com.apple.screensaver askForPassword -bool true",          # Require password
  "defaults write com.apple.screensaver askForPasswordDelay -int 0",         # Require immediately

  # ============================================
  # Spaces settings
  # ============================================
  "defaults write com.apple.spaces spans-displays -bool false",              # Separate spaces per display

  # ============================================
  # Universal access settings
  # ============================================
  "defaults write com.apple.universalaccess reduceMotion -bool false",       # Enable animations
  "defaults write com.apple.universalaccess reduceTransparency -bool false", # Enable transparency

  # ============================================
  # Global domain settings
  # ============================================
  "defaults write NSGlobalDomain AppleInterfaceStyle -string 'Dark'",        # Enable dark mode
  "defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false",      # Disable press-and-hold
  "defaults write NSGlobalDomain AppleShowAllExtensions -bool true",         # Show all extensions
  "defaults write NSGlobalDomain InitialKeyRepeat -int 15",                  # Faster initial key repeat
  "defaults write NSGlobalDomain KeyRepeat -int 2",                          # Faster key repeat
  "defaults write NSGlobalDomain NSAutomaticCapitalizationEnabled -bool false",    # Disable auto-caps
  "defaults write NSGlobalDomain NSAutomaticDashSubstitutionEnabled -bool false",  # Disable smart dashes
  "defaults write NSGlobalDomain NSAutomaticPeriodSubstitutionEnabled -bool false", # Disable auto-period
  "defaults write NSGlobalDomain NSAutomaticQuoteSubstitutionEnabled -bool false", # Disable smart quotes
  "defaults write NSGlobalDomain NSAutomaticSpellingCorrectionEnabled -bool false", # Disable auto-correct
  "defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool false",   # Save to disk
  "defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode -bool true",   # Expand save panel
  "defaults write NSGlobalDomain NSTableViewDefaultSizeMode -int 2",               # Medium sidebar icons
  "defaults write NSGlobalDomain PMPrintingExpandedStateForPrint -bool true",      # Expand print panel
  "defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1",              # Tap to click
  "defaults write NSGlobalDomain com.apple.sound.beep.volume -float 0.0",          # Disable beep sound
  "defaults write NSGlobalDomain com.apple.sound.beep.feedback -int 0",            # Disable beep feedback

  # ============================================
  # Apply changes
  # ============================================
  "killall Dock",
  "killall Finder",
  "killall SystemUIServer",
]
