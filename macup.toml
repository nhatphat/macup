# macup configuration file
# This is your personal Mac setup configuration

[settings]
fail_fast = false # Continue on errors (recommended)
max_parallel = 5  # Max concurrent package installs

# macup automatically detects required managers from the sections below.
# If you declare packages, macup will auto-install the necessary managers.

# ============================================
# Homebrew Packages
# ============================================

[brew]
depends_on = []

# Taps (third-party repositories)
taps = []

# CLI tools (formulae)
# Format: "package" or "package:binary" for custom binary name checking
# Examples:
#   - "neovim" -> installs neovim, checks for 'neovim' binary
#   - "httpie:http" -> installs httpie, checks for 'http' binary
formulae = [
  # "neovim:nvim",
  "ripgrep:rg",
  "fd",
  "zoxide",
  "starship",
  "fzf",
  "chezmoi",
  "aws-vault",
  "awscli:aws",
  "btop",
  "aria2:aria2c",
  "gh",
  "git-crypt",
  "gnupg:gpg",
  "jq",
  "just",
  "lazygit",
  "lua",
  "markdownlint-cli2",
  "mise",
  "mkcert",
  "node",
  "rust:cargo",
  "terraform",
  "mas",
]

casks = [
  "ghostty",
  "maccy",
  "font-hack-nerd-font",
  "zed",
  # "orbstack",
  "brave-browser",
  "yaak",
  "arc",
  "shortcat",
]

# GUI applications (casks)
# ============================================
# Mac App Store Apps
# ============================================

[mas]
depends_on = ["brew"] # mas-cli will be auto-installed via brew if needed

apps = [
  { name = "Mattermost Desktop", id = 1614666244 },
  { name = "Translator by Mate", id = 1005088137 },
  { name = "TestFlight", id = 899247664 },
  { name = "Slack for Desktop", id = 803453959 },
]

# ============================================
# NPM Global Packages
# ============================================

[npm]
depends_on = ["brew"] # Node.js will be auto-installed via brew if needed

# Format: "package" or "package:binary" for custom binary name checking
# Examples:
#   - "typescript:tsc" -> installs typescript, checks for 'tsc' binary
#   - "prettier" -> installs prettier, checks for 'prettier' binary
global = ["@github/copilot:copilot", "@yaakapp/cli:yaakcli"]

# ============================================
# Cargo Packages
# ============================================

[cargo]
depends_on = [
  "brew",
] # Rust will be auto-installed via brew if needed (or use rustup if available)

packages = []

# ============================================
# Custom Install Scripts
# ============================================

[install]
depends_on = []

[[install.scripts]]
name = "oh-my-zsh"
check = "test -d ~/.oh-my-zsh"
command = 'sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"'

[[install.scripts]]
name = "zsh-autosuggestions"
check = "test -d ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions"
command = 'git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions'

[[install.scripts]]
name = "zsh-syntax-highlighting"
check = "test -d ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting"
command = 'git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting'

[[install.scripts]]
name = "neovim"
binary = "nvim"
command = 'HOMEBREW_NO_AUTO_UPDATE=1 brew install neovim --head'

[[install.scripts]]
name = "opencode"
binary = "opencode"
command = 'curl -fsSL https://opencode.ai/install | bash'

[[install.scripts]]
name = "claude code"
binary = "claude"
command = "curl -fsSL https://claude.ai/install.sh | bash"

# [[install.scripts]]
# name = "nerd-font-jetbrains-mono"
# check = "test -f ~/Library/Fonts/JetBrainsMonoNerdFont-Regular.ttf"
# command = """
# curl -fLo ~/Library/Fonts/JetBrainsMonoNerdFont-Regular.ttf --create-dirs \
#   https://github.com/ryanoasis/nerd-fonts/raw/master/patched-fonts/JetBrainsMono/Ligatures/Regular/JetBrainsMonoNerdFont-Regular.ttf
# """
# required = false

# ============================================
# macOS System Settings
# ============================================

[system]
depends_on = []

commands = [
  # Dock settings
  "defaults write com.apple.dock autohide -bool true",
  "defaults write com.apple.dock tilesize -int 48",
  "defaults write com.apple.dock show-recents -bool false",
  "killall Dock",

  # Finder settings
  "defaults write NSGlobalDomain AppleShowAllExtensions -bool true",
  "defaults write com.apple.finder ShowPathbar -bool true",
  "defaults write com.apple.finder ShowStatusBar -bool true",
  "killall Finder",

  # Screenshots location
  # "defaults write com.apple.screencapture location ~/Pictures/Screenshots",
  # "mkdir -p ~/Pictures/Screenshots",

  # Disable crash reporter
  # "defaults write com.apple.CrashReporter DialogType -string 'none'",
]
